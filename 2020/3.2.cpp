#include <iostream>
#include <vector>

const char map[] = ".....##.#.....#........#....##.....#...#...#.#.......#.............##.#......#.......#..........##.........#...#....................#...#.......#.........#..........#......#..#....#....#..................#..#..#....##.....##...#..#..#..#..#.##.......##.###....#.#.........#......#.......#......#......#....##.......#..#.#.......#......#.................#............#........#.#........#........#.#.##.#.#..#...#.....#....##..........##..........#...#...#.....................#...###...#.......##.#..#............#........#....##.#..#.....#.......#.#.#.......##.....#....#.#.......#.##......##...........#.......#..##.#.##...#.#........#..#...#...#..#.#..#........#.#.......#..#...#.##.##.##...#.#............##....#.#..###......#..#......#.....#..#..#.##.#.##.#.#..............#....#..#.#.#.........#..#........#.#....##.##......#......#....#.##.##....#..#..............#.#.#.#..#.#..#.#..#.##.....#.....#######.###.##.#.#.#.......#.##.....##......#...#.........#....#..#...##.#..#..#..#..#..............#.##....#..........#....#.##.....#................#............#....#...#.##.....#.....#.##.###.......#..#......#...#.........#.......#..#......#.#..#.##.......##................##..#..#..#..#.##..#.....#..##............##...#..#.........#..#....#..##.....##..#.#...#.....##....#.#.#...#...#..##.##.#..#.........#.##.#...#.#.#.......#.#....##....#............#.......#..#.....##..#...#...#......#.#...#...#..#......#.......##....#.#.#.#.#..#...........##..#...#.........#......#...#...#...#.#.#.#..#.#.##..##......#............###.....###.................#...#........###............##...#...#...#........#..#..#.##.#......................#..##........##.##...#.......#.......##......#.....#......#...##.#.....#......#......#......#...##.#.#...#.#.......................#..#...#.##.......#.......................#...#...##.....#...#.........#.....#..#.#...###..#........#..##.##..#.##..#...#.....#.....#.....#..#..#..###..#.....#.#.#.#......#....#.#........#....##.#...##.........#.#..##........##....##.#.#...#...#....#.###.#.#.........#......#...##..###.......#...............#....#..##..#.....#.#............#...##...###......##.............##.#.......##...........#....#......#...##.....#....###.#.....#.#..#..#....#...#..#.#.....#.#....#...............#..#....#....####....###....#.#.....##........#..#.##.#....#..........##...#...#..#....####...#...##.#......##...#..#..........##..#.##....#.......##.#.#.....#.#...............#...#.#........#.....#.#.....#.##.......#....#.#..##.#.#..............##...#.....#...#.............#.##.##..#.#...#........#..#.....##............##...#.#.###...#.......#.#.#..#..................#..#...##.............#...#........#..#...#.#.......#...#.....#...##.......#.#..................##..#........###.....#....#.##......#..###.......#....##....#....#.....#.................#..........#...#...#.................#..#.###.......#..#.#.#.##....#...#.....#....#.........#......#.............#........###........#..............#......#..#..#...........#...#..........#...##...#.###..#...#.....#.#.......#..##......#.......##..........#....##.#...#.#..#....#...#.#...........#..#....##...#..##..#.#.................###.#...#..#.#.#...##...........#.................#..##...#.#..##....##........#........#.##..#.#...#......#...##.......##......#...#....#...#..#..#.....#...........#..#......#..#..#..###.......#.##..........#...#...#.#.....##..#..........#.#.#...###...........#................#...##.....##..#....#..........#.#.#.......##...#.#........#.....#.##.......####.....#..#.........##..#......#.........#...#..............#...................#..##...##....#.#.........#....#...#......##...##.....#..####..........##.#....#.#.......##...#.....#...#.#.#...#..#..##.....#.....#..................###.....#...#.#.....#.......#.#...###.#.....#..#....#............#........#.#....#..#.#...............#....#..#..#.............#......#...#.......##....................#....#.........#....#.#.#..#......#....#..#...............#........#..#..##......#.........#..#.##........##......#..#..#.##.....#.#....#.........##...#..###..............#....###...##.....#..##......#.......##............#...#.##......##....#..#...........#....#..##.......#..#.#..#...##..#...........#..#..#.....#....#...#..###...###....#.#####..#...#.#.#..#.#.###...##..##............##.#...#.##...#.##..#...#...#....##.#..#..##...#....#...#............##..#....#.#......#....#....#..##..##...........#...#.......#.##..#...#.........#.....##.....#..#..#....##.#...#...#..#..#....##..##.#............#...#....##........#...#.##.........#.#......#.#....#.##........#.........#..###.........#......#.#......#..#.........#.#.......#.#........#...#..........##.#...#..#.#.......#...#....#...#...#..#.#..#.#..#.........#....#..#####..#....#.#....#.#.###...#...............##...........##......##......#.....#..#....#...............#...#.#..#....##......#...##.......#........#.....#...#..#......#......##.........#......#......#..###.##...#.#.....#.....................#......#..#.........#...............#.#...#..#..#.......#..#...#.#####......#..#.........#.....#...............##........#............#.#......#...#.....#..#..#...#....#...#..#....#....##......##.....#.#.#...##..##......#...#....#.........#.#.#.....###....##.##....#..........##...##.......#........#.......#...##.#....##.##........#........................#....#...#.#.##...#.....#...#..#..#....##..#..#..........##..##..#.....#..#...#.##.....#........#.##...#.#..#.....##....#...#..##...#........##....#..#...........#........#..........#.#..#....#..##.......#..#.....#................#...#........#.##..#.....#..#....#..#.#.....#....##.....#....#.##.#..##..............##.......##.........#......................##..#....#.#...........###..#........#..####.##.......#.##...#.#....#.####........#...............#..........##.#.......#.....#......#...#........##.....#....#.....#..#..#.....#...##.............#......#.#.##.#.....#..#........#...........##....#..#........#..................#........#..#.#....##.......#......#...####..#.##...##..#...#.............#.##........#..##......#.##......###..............#........#........##.#.#.#...#.#.....#.........#...........#...............#..................###.#.......#....####.##..#..#..........#....#...#......#...#..#..#.....#.##................#....#....#..#.......#.#....#...#......#.#..#..##....#........................#..#.#...#..........#......#.#.............#................#...###.....#....#........##.......##...##........#...#...........#...#...#..........##.......#.#...#.#.#....#......##..............#.#...#.##.#..#.#.##........#....##.....###..#.......#.....###.....#.#.#...#..#.........##..#......#..###...#.#.#.....#.#.#....#.....#............#..##.....#....##..........#.....##..#...........#....#...#..#...##...#.......#.....#..........#....#..#................#......#....#......#.#...#..#.#....#....#...#..#...###..#..##....#.#......#..............#.....#..........#.#...#.........#.#.........##......##...........##.#.##..#..#..##..#....#.#......#.#...##...#.###....###...#.....#......#.#................#......#......#.....#.....#....##.......#...#.#...............##..#..........#....#.......#.#.....##..#...........#....#.......#.#...##.#....#......##.#.........##...##.............#..##.#.#..##.......#....#..#...#....#.#.#.#...#.#....#....#..##.....#.#...###.##............#.#...##.#..#.#..##.#....##.....#..#..###....#..##....#................##.........##..#...#..###....#.....##...#...##......#..#.#.....#...#....##......##...#.##.......#..........#.....#.....##........#.###....#...........#............#.......#....#..#.##..##.#..#...#....##.#.....#..#..#..........#....#.#.#...#.....##.....#.#........##.#.#........#......##.##........#.##.......#...#..#.....###..##....#.#....#.#.............#.......#...##.....#...#...#......##.#......#.....#..........#.....###...#.............#...#.#...#...#..#......#......#.....#.......###.#....###.#......#.......#....####....##..#..#.#.....#....#........#.......#.........#.......#......#.#...#..##....#.....##.........................#..#.#..#......#.......................##...##.#............#.......#...#..#.#.#........#.#..##..#..#.#..#.......#.....#........#..#..#....#....###............#..#..#...#....#......#....................##..#........##.#....###............##.......#.##................#......###.#..#..#...#....###.##..#......#.#....#.....##.#.........##......##.........#...#........####..............#........#...#.#..##..##.........##...........#......#....#..#.........#.....#.....#.##.................#.##..#...##.#.####..#....####..#......#....#.##..##...#.#..#....#.......#.....#.....#.#...##.......#.....##...#.....#.......#...##..........#..##..##..#.###..#..##...#....#...#..#..........##..###.......###...#........#...#.#.......#.##...##..###.#......#..##.#.#..#..#..#..........#........#.......#.................#.#.....##.................#..#........#..#.#..###..##..#.............##..#.................#....#.....#.........#.....#..##...#..#..##.##......####..#...........#.......#....#...............#....#.#.........##.#...#.#........##....#......##.###...##..###....#...#...#..##..#....#.#.#...#.#.#.#...#...###.#...#.......#....#..#.......#..#.#.#.#........#.....##....#.......#.#...#.#...........##...#.....##....#.....##...#....................#.....####...#..#.#......#.......##...#.##.....###.........#.#......#..#.#...#......#...#....#..##.......#...##..#....#..#...........#...#..#...#.......##........#.##......#...........#...##................##....##......#....#..#...#......#.#...#.##.#...##....#..#....................#...##...#..#............#........#...................#.........##.....#...#...#......##.#...#...#.#.....#...#.#.................#........##...#....#...###.##......#...#....#...#..#...#....#.....#...##.#........#..#.........#....##.....#..##...#.....##...#..#.........#.#.#...#......#...#.#.#...........#...#..#..#..##....#..#..##....#..........#.###......#..#....#.#...#...#..#..#.###.....#..#.................#..#..##.##.#......#....##..#....";

const auto cols = 31;
const auto rows = 323;

struct slope
{
	int right;
	int down;
};

const std::vector<slope> slopes {
	{1, 1},
	{3, 1},
	{5, 1},
	{7, 1},
	{1, 2},
};

int tranverse_slope(const slope& s)
{
	int open = 0;
	int tree = 0;

	int col = 0;
	int row = 0;

	do
	{
		const auto pos = col + (row * cols);

		if (map[pos] == '.')
			++open;
		else if (map[pos] == '#')
			++tree;
		else
			std::cerr << "WTF!";

		// move down the slope
		col += s.right;
		row += s.down;

		// move to the correct point on the map
		if (col >= cols)
			col -= cols;
	}
	while ( row < rows );

	std::cout << "open: " << open << " trees: " << tree << std::endl;

	return tree;
}

int main(int argc, char const *argv[])
{
	uint total = 1;

	for (const auto & slope : slopes)
	{
		total *= tranverse_slope(slope);
	}

	std::cout << "multiply total number of trees: " << total << std::endl;

	return 0;
}
